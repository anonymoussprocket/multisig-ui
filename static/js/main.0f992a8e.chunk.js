(this["webpackJsonpmultisig-ui"]=this["webpackJsonpmultisig-ui"]||[]).push([[0],{152:function(e,t){},228:function(e,t,r){},229:function(e,t,r){},233:function(e,t){},235:function(e,t){},247:function(e,t){},249:function(e,t){},278:function(e,t){},280:function(e,t){},281:function(e,t){},286:function(e,t){},288:function(e,t){},307:function(e,t){},319:function(e,t){},322:function(e,t){},377:function(e){e.exports=JSON.parse('{"rpc":"https://tezos-prod.cryptonomic-infra.tech/","conseilServer":{"url":"https://conseil-prod.cryptonomic-infra.tech:443","apiKey":"4660121e-1bab-4740-8d57-083681e3441d","network":"mainnet"},"multisigAddr":"KT1Sdwz9UA7N9HFL5C4xwP3FNu6ABFSz3C7B"}')},382:function(e,t,r){"use strict";r.r(t);var a=r(1),n=r.n(a),i=r(212),s=r.n(i),c=(r(228),r(19)),o=r(134),u=(r(229),r(0)),l=r(37),p=r(20),d=r(414),m=r(415),b=r(75),g=r(23),j=r(34),v=r(377),f=function(){var e=Object(l.a)(Object(u.a)().mark((function e(){var t,r;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new b.a({name:"Multisig"}),e.next=3,t.requestPermissions({network:{type:v.conseilServer.network}});case 3:return e.next=5,t.getActiveAccount();case 5:return r=e.sent,e.abrupt("return",{client:t,account:r.address});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(l.a)(Object(u.a)().mark((function e(){var t;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.TezosNodeReader.getContractStorage(v.rpc,v.multisigAddr);case 2:return t=e.sent,e.abrupt("return",Number(Object(j.JSONPath)({path:"$.args[0].args[0].int",json:t})[0])+1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(e,t,r,a,n){return'{ "prim": "Pair", "args": [ { "bytes": "'.concat(e,'" }, { "prim": "Pair", "args": [ { "int": "').concat(t,'" }, [ { "prim": "DROP" }, { "prim": "NIL", "args": [ { "prim": "operation" } ] }, { "prim": "PUSH", "args": [ { "prim": "address" }, { "string": "').concat(r,'" } ] }, { "prim": "CONTRACT", "args": [ { "prim": "pair", "args": [ { "prim": "mutez" }, { "prim": "address" } ] } ], "annots": [ "%transfer" ] }, { "prim": "IF_NONE", "args": [ [ { "prim": "PUSH", "args": [ { "prim": "int" }, { "int": "3" } ] }, { "prim": "FAILWITH" } ], [] ] }, { "prim": "PUSH", "args": [ { "prim": "mutez" }, { "int": "0" } ] }, { "prim": "PUSH", "args": [ { "prim": "pair", "args": [ { "prim": "mutez" }, { "prim": "address" } ] }, { "prim": "Pair", "args": [ { "int": "').concat(n,'" }, { "string": "').concat(a,'" } ] } ] }, { "prim": "TRANSFER_TOKENS" }, { "prim": "CONS" } ] ] } ]}')},h=function(e,t,r,a,n){var i=g.TezosMessageUtils.writeBufferWithHint(e,"chain_id").toString("hex"),s='{ "prim": "Pair", "args": [ { "bytes": "'.concat(i,'" }, { "prim": "Pair", "args": [ { "int": "').concat(t,'" }, [ { "prim": "DROP" }, { "prim": "NIL", "args": [ { "prim": "operation" } ] }, { "prim": "PUSH", "args": [ { "prim": "address" }, { "bytes": "').concat(g.TezosMessageUtils.writeAddress(r),'" } ] }, { "prim": "CONTRACT", "args": [ { "prim": "pair", "args": [ { "prim": "mutez" }, { "prim": "address" } ] } ], "annots": [ "%transfer" ] }, { "prim": "IF_NONE", "args": [ [ { "prim": "PUSH", "args": [ { "prim": "int" }, { "int": "3" } ] }, { "prim": "FAILWITH" } ], [] ] }, { "prim": "PUSH", "args": [ { "prim": "mutez" }, { "int": "0" } ] }, { "prim": "PUSH", "args": [ { "prim": "pair", "args": [ { "prim": "mutez" }, { "prim": "address" } ] }, { "prim": "Pair", "args": [ { "int": "').concat(n,'" }, { "bytes": "').concat(g.TezosMessageUtils.writeAddress(a),'" } ] } ] }, { "prim": "TRANSFER_TOKENS" }, { "prim": "CONS" } ] ] } ]}');return g.TezosMessageUtils.writePackedData(s,"")},x=function(e,t,r,a,n){return'{ "prim": "Pair", "args": [ { "string": "'.concat(e,'" }, { "prim": "Pair", "args": [ { "int": "').concat(t,'" }, [ { "prim": "DROP" }, { "prim": "NIL", "args": [ { "prim": "operation" } ] }, { "prim": "PUSH", "args": [ { "prim": "address" }, { "string": "').concat(r,'" } ] }, { "prim": "CONTRACT", "args": [ { "prim": "pair", "args": [ { "prim": "address" }, { "prim": "pair", "args": [ { "prim": "address" }, { "prim": "int" } ] } ] } ], "annots": [ "%transfer" ] }, { "prim": "IF_NONE", "args": [ [ { "prim": "PUSH", "args": [ { "prim": "int" }, { "int": "10" } ] }, { "prim": "FAILWITH" } ], [] ] }, { "prim": "PUSH", "args": [ { "prim": "mutez" }, { "int": "0" } ] }, { "prim": "PUSH", "args": [ { "prim": "pair", "args": [ { "prim": "address" }, { "prim": "pair", "args": [ { "prim": "address" }, { "prim": "nat" } ] } ] }, { "prim": "Pair", "args": [ { "string": "').concat(v.multisigAddr,'" }, { "prim": "Pair", "args": [ { "string": "').concat(a,'" }, { "int": "').concat(n,'" } ] } ] } ] }, { "prim": "TRANSFER_TOKENS" }, { "prim": "CONS" } ] ] } ] }')},N=function(e,t,r,a,n){var i=g.TezosMessageUtils.writeBufferWithHint(e,"chain_id").toString("hex"),s='{ "prim": "Pair", "args": [ { "bytes": "'.concat(i,'" }, { "prim": "Pair", "args": [ { "int": "').concat(t,'" }, [ { "prim": "DROP" }, { "prim": "NIL", "args": [ { "prim": "operation" } ] }, { "prim": "PUSH", "args": [ { "prim": "address" }, { "bytes": "').concat(g.TezosMessageUtils.writeAddress(r),'" } ] }, { "prim": "CONTRACT", "args": [ { "prim": "pair", "args": [ { "prim": "address" }, { "prim": "pair", "args": [ { "prim": "address" }, { "prim": "int" } ] } ] } ], "annots": [ "%transfer" ] }, { "prim": "IF_NONE", "args": [ [ { "prim": "PUSH", "args": [ { "prim": "int" }, { "int": "10" } ] }, { "prim": "FAILWITH" } ], [] ] }, { "prim": "PUSH", "args": [ { "prim": "mutez" }, { "int": "0" } ] }, { "prim": "PUSH", "args": [ { "prim": "pair", "args": [ { "prim": "address" }, { "prim": "pair", "args": [ { "prim": "address" }, { "prim": "nat" } ] } ] }, { "prim": "Pair", "args": [ { "bytes": "').concat(g.TezosMessageUtils.writeAddress(v.multisigAddr),'" }, { "prim": "Pair", "args": [ { "bytes": "').concat(g.TezosMessageUtils.writeAddress(a),'" }, { "int": "').concat(n,'" } ] } ] } ] }, { "prim": "TRANSFER_TOKENS" }, { "prim": "CONS" } ] ] } ] }');return g.TezosMessageUtils.writePackedData(s,"")},y=function(){var e=Object(l.a)(Object(u.a)().mark((function e(t,r,a){var n,i,s,c;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.client,i=t.account,s='{ "prim": "Pair", "args": [ [ '.concat(r.map((function(e){return'{ "prim": "Elt", "args": [{ "string": "'.concat(e.address,'" }, { "string": "').concat(e.signature,'" }] }')})).join(", ")," ], ").concat(a," ] }"),e.next=4,T({client:n,account:i},[{to:v.multisigAddr,amtInMuTez:0,entrypoint:"submit",parameters:s}]);case 4:if("applied"===(c=e.sent).status){e.next=7;break}throw new Error("TEZOS TX FAILED");case 7:return e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t,r,a){return e.apply(this,arguments)}}(),S=function(){var e=Object(l.a)(Object(u.a)().mark((function e(t,r){var a,n,i;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.account,e.next=3,T({client:a,account:n},[{to:v.multisigAddr,amtInMuTez:0,entrypoint:"execute",parameters:'{"int": "'.concat(r,'"}')}]);case 3:if("applied"===(i=e.sent).status){e.next=6;break}throw new Error("TEZOS TX FAILED");case 6:return e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),k=function(){var e=Object(l.a)(Object(u.a)().mark((function e(){return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g.TezosNodeReader.getChainId(v.rpc));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(l.a)(Object(u.a)().mark((function e(t,r){var a,n,i,s,c,o,l=arguments;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.client,n=t.account,l.length>2&&void 0!==l[2]?l[2]:500,l.length>3&&void 0!==l[3]?l[3]:50,e.prev=3,i=[],r.forEach((function(e){i.push({kind:b.c.TRANSACTION,amount:e.amtInMuTez,destination:e.to,source:n,parameters:{entrypoint:e.entrypoint,value:JSON.parse(e.parameters)}})})),e.next=8,a.requestOperation({operationDetails:i});case 8:return s=e.sent,console.log(s),c=s.transactionHash.replace(/"/g,"").replace(/\n/,""),e.next=13,g.TezosConseilClient.awaitOperationConfirmation(v.conseilServer,v.conseilServer.network,c,2);case 13:return o=e.sent,e.abrupt("return",o);case 17:throw e.prev=17,e.t0=e.catch(3),console.error(e.t0),e.t0;case 21:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(t,r){return e.apply(this,arguments)}}(),A=r(409),P=Object(A.a)((function(e){return{menu:{display:"flex",margin:"0 auto"},menuItem:{color:"black",display:"block",fontSize:"2vw",margin:"1vw 2vw 2vw 2vw","&:hover":{textDecoration:"none"}},title:{fontSize:"5vw",margin:"2.5vw 1vw 1vw 1vw"},header:{display:"flex",justifyContent:"center"},wallet:{border:"0.2vw solid black",borderRadius:"0.3vw",width:"50%",margin:"2.5vw auto",padding:"1vw",background:"black",color:"white",fontWeight:"bold",textTransform:"none",fontSize:"1.1vw","&:hover":{cursor:"pointer",background:"white",color:"black"}},box:{width:"30%"},container:{width:"70%",margin:"0 auto",padding:"3vw"},select:{width:"fit-content",margin:"1vw auto"},label:{padding:"0.7vw"},input:{margin:"0.7vw"},display:{margin:"4vw"}}})),I=r(9),z=function(){var e=P(),t=Object(a.useState)("transfer coins"),r=Object(p.a)(t,2),n=r[0],i=r[1],s=Object(a.useState)("operation data"),c=Object(p.a)(s,2),o=c[0],g=c[1],j=Object(a.useState)("your signature"),y=Object(p.a)(j,2),S=y[0],T=y[1],A=function(t){return Object(I.jsxs)("form",{onSubmit:t,children:[Object(I.jsx)("label",{className:e.label,children:"destination"}),Object(I.jsx)("input",{className:e.input,type:"text",name:"address",placeholder:"Address",required:!0}),Object(I.jsx)("label",{className:e.label,children:"amount"}),Object(I.jsx)("input",{className:e.input,type:"number",name:"amount",placeholder:"Amount",required:!0}),Object(I.jsx)("input",{className:e.input,type:"submit",value:"Submit"})]})},z=function(){var e=Object(l.a)(Object(u.a)().mark((function e(t){var r,a,n,i,s,c,o,l;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,Promise.all([k(),w(),f()]);case 4:return r=e.sent,a=Object(p.a)(r,3),n=a[0],i=a[1],s=a[2],c=s.client,s.account,u=n,d=i,m=t.target.address.value,j=t.target.amount.value,o={operation:O(u,d,v.multisigAddr,m,j),bytes:h(u,d,v.multisigAddr,m,j)},e.next=14,c.requestSignPayload({signingType:b.b.MICHELINE,payload:o.bytes});case 14:l=e.sent,T(l.signature),g(o.operation),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(1),console.log("Failed to create operation",e.t0),alert("Failed to create operation");case 23:case"end":return e.stop()}var u,d,m,j}),e,null,[[1,19]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(l.a)(Object(u.a)().mark((function e(t){var r,a,n,i,s,c,o,l;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,Promise.all([k(),w(),f()]);case 4:return r=e.sent,a=Object(p.a)(r,3),n=a[0],i=a[1],s=a[2],c=s.client,s.account,u=n,d=i,m=t.target.token.value,j=t.target.address.value,v=t.target.amount.value,o={operation:x(u,d,m,j,v),bytes:N(u,d,m,j,v)},e.next=14,c.requestSignPayload({signingType:b.b.MICHELINE,payload:o.bytes});case 14:l=e.sent,T(l.signature),g(o.operation),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(1),console.log("Failed to create operation",e.t0),alert("Failed to create operation");case 23:case"end":return e.stop()}var u,d,m,j,v}),e,null,[[1,19]])})));return function(t){return e.apply(this,arguments)}}();return Object(I.jsxs)("div",{className:e.container,children:[Object(I.jsxs)(d.a,{className:e.select,labelId:"operations",id:"operations",value:n,label:"Operation",onChange:function(e){i(e.target.value)},children:[Object(I.jsx)(m.a,{value:"transfer coins",children:"transfer coins"}),Object(I.jsx)(m.a,{value:"transfer tokens",children:"transfer tokens"})]}),function(){switch(n){case"transfer coins":default:return A(z);case"transfer tokens":return t=C,Object(I.jsxs)("form",{onSubmit:t,children:[Object(I.jsx)("label",{className:e.label,children:"destination"}),Object(I.jsx)("input",{className:e.input,type:"text",name:"address",placeholder:"Address",required:!0}),Object(I.jsx)("label",{className:e.label,children:"token"}),Object(I.jsx)("input",{className:e.input,type:"text",name:"token",placeholder:"Address",required:!0}),Object(I.jsx)("label",{className:e.label,children:"amount"}),Object(I.jsx)("input",{className:e.input,type:"number",name:"amount",placeholder:"Amount",required:!0}),Object(I.jsx)("input",{className:e.input,type:"submit",value:"Submit"})]})}var t}(),Object(I.jsxs)("div",{className:e.display,children:[Object(I.jsx)("label",{children:"operation content"}),Object(I.jsx)("input",{className:e.input,type:"text",value:o,readOnly:!0}),Object(I.jsx)("br",{}),Object(I.jsx)("label",{children:"signature"}),Object(I.jsx)("input",{className:e.input,type:"text",value:S,readOnly:!0})]})]})},C=Object(A.a)((function(e){return{menu:{display:"flex",margin:"0 auto"},menuItem:{color:"black",display:"block",fontSize:"2vw",margin:"1vw 2vw 2vw 2vw","&:hover":{textDecoration:"none"}},title:{fontSize:"5vw",margin:"2.5vw 1vw 1vw 1vw"},header:{display:"flex",justifyContent:"center"},wallet:{border:"0.2vw solid black",borderRadius:"0.3vw",width:"50%",margin:"2.5vw auto",padding:"1vw",background:"black",color:"white",fontWeight:"bold",textTransform:"none",fontSize:"1.1vw","&:hover":{cursor:"pointer",background:"white",color:"black"}},box:{width:"30%"},container:{width:"70%",margin:"0 auto",padding:"3vw"},select:{width:"fit-content",margin:"1vw auto"},label:{padding:"0.7vw"},input:{margin:"0.7vw"},display:{margin:"4vw"}}})),U=function(){var e=C(),t=function(){var e=Object(l.a)(Object(u.a)().mark((function e(t){var r;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,f();case 4:return r=e.sent,e.next=7,S(r,t.target.id.value);case 7:alert("operation executed!"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log("Failed to submit operation",e.t0),alert("Failed to submit operation");case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(I.jsx)("div",{className:e.container,children:Object(I.jsxs)("form",{onSubmit:t,children:[Object(I.jsx)("label",{className:e.label,children:"Operation Index:"}),Object(I.jsx)("input",{className:e.input,type:"number",name:"id",placeholder:"Your Operation Index",required:!0}),Object(I.jsx)("input",{className:e.input,type:"submit",value:"Execute"})]})})},E=Object(A.a)((function(e){return{menu:{display:"flex",margin:"0 auto"},menuItem:{color:"black",display:"block",fontSize:"2vw",margin:"1vw 2vw 2vw 2vw","&:hover":{textDecoration:"none"}},title:{fontSize:"5vw",margin:"2.5vw 1vw 1vw 1vw"},header:{display:"flex",justifyContent:"center"},wallet:{border:"0.2vw solid black",borderRadius:"0.3vw",width:"50%",margin:"2.5vw auto",padding:"1vw",background:"black",color:"white",fontWeight:"bold",textTransform:"none",fontSize:"1.1vw","&:hover":{cursor:"pointer",background:"white",color:"black"}},box:{width:"30%"},container:{flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"space-evenly"}}})),H=function(){var e=E();return Object(I.jsx)("div",{className:e.header,children:Object(I.jsxs)("div",{className:e.container,children:[Object(I.jsx)("h1",{className:e.title,children:"MultiSig"}),Object(I.jsxs)("div",{className:e.menu,children:[Object(I.jsx)("a",{href:"/#/create",className:e.menuItem,children:"Create"}),Object(I.jsx)("a",{href:"/#/submit",className:e.menuItem,children:"Submit"}),Object(I.jsx)("a",{href:"/#/execute",className:e.menuItem,children:"Execute"})]})]})})},F=Object(A.a)((function(e){return{menu:{display:"flex",margin:"0 auto"},menuItem:{color:"black",display:"block",fontSize:"2vw",margin:"1vw 2vw 2vw 2vw","&:hover":{textDecoration:"none"}},title:{fontSize:"5vw",margin:"2.5vw 1vw 1vw 1vw"},header:{display:"flex",justifyContent:"center"},wallet:{border:"0.2vw solid black",borderRadius:"0.3vw",width:"50%",margin:"2.5vw auto",padding:"1vw",background:"black",color:"white",fontWeight:"bold",textTransform:"none",fontSize:"1.1vw","&:hover":{cursor:"pointer",background:"white",color:"black"}},box:{width:"30%"},container:{width:"70%",margin:"0 auto",padding:"3vw"},select:{width:"fit-content",margin:"1vw auto"},label:{padding:"0.7vw"},input:{margin:"0.7vw"},display:{margin:"4vw"},opID:{margin:"2vw"}}})),R=function(){var e=F(),t=Object(a.useState)(1),r=Object(p.a)(t,2),n=r[0],i=r[1],s=Object(a.useState)(0),c=Object(p.a)(s,2),o=c[0],d=c[1],m=function(){var e=Object(l.a)(Object(u.a)().mark((function e(t){var r,a,i,s;return Object(u.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t.preventDefault(),e.prev=1,r=[],a=1;a<=n;a++)r.push({signature:t.target["signature".concat(a)].value,address:t.target["address".concat(a)].value});return r.sort((function(e,t){console.log(g.TezosMessageUtils.writeAddress(e.address));var r=BigInt("0x"+g.TezosMessageUtils.writeAddress(e.address)),a=BigInt("0x"+g.TezosMessageUtils.writeAddress(t.address));return r>a?1:r<a?-1:0})),e.next=7,f();case 7:return i=e.sent,e.next=10,w();case 10:return s=e.sent,e.next=13,y(i,r,t.target.operation.value);case 13:alert("operation submitted"),d(s),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(1),console.log("Failed to submit operation",e.t0),alert("Failed to submit operation");case 21:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t){return e.apply(this,arguments)}}();return Object(I.jsxs)("div",{className:e.container,children:[Object(I.jsxs)("form",{onSubmit:function(e){e.preventDefault(),i(e.target.count.value)},children:[Object(I.jsx)("label",{className:e.label,children:"Signature Count:"}),Object(I.jsx)("input",{className:e.input,type:"number",min:1,name:"count",placeholder:"Signature Count",required:!0}),Object(I.jsx)("input",{className:e.input,type:"submit",value:"Submit"})]}),Object(I.jsx)("br",{}),function(){for(var t=[],r=1;r<=n;r++)t.push(Object(I.jsxs)("div",{children:[Object(I.jsxs)("label",{className:e.label,children:["Address ",r,":"]}),Object(I.jsx)("input",{className:e.input,type:"text",name:"address".concat(r),placeholder:"Address",required:!0}),Object(I.jsxs)("label",{className:e.label,children:["Signature ",r,":"]}),Object(I.jsx)("input",{className:e.input,type:"text",name:"signature".concat(r),placeholder:"Signature",required:!0})]}));return Object(I.jsxs)("form",{onSubmit:m,children:[Object(I.jsx)("br",{}),Object(I.jsx)("label",{className:e.label,children:"Operation:"}),Object(I.jsx)("input",{className:e.input,type:"text",name:"operation",placeholder:"Operation",required:!0}),Object(I.jsx)("br",{}),Object(I.jsx)("br",{}),t,Object(I.jsx)("input",{className:e.input,type:"submit",value:"Submit"})]})}(),Object(I.jsxs)("div",{className:e.opID,children:["Your Operation Index: ",o]})]})};var D=function(){return Object(I.jsx)(o.a,{children:Object(I.jsxs)("div",{className:"App",children:[Object(I.jsx)(H,{}),Object(I.jsxs)(c.c,{children:[Object(I.jsx)(c.a,{path:"/create",element:Object(I.jsx)(z,{})}),Object(I.jsx)(c.a,{path:"/submit",element:Object(I.jsx)(R,{})}),Object(I.jsx)(c.a,{path:"/execute",element:Object(I.jsx)(U,{})})]})]})})};s.a.createRoot(document.getElementById("root")).render(Object(I.jsx)(n.a.StrictMode,{children:Object(I.jsx)(D,{})}))}},[[382,1,2]]]);
//# sourceMappingURL=main.0f992a8e.chunk.js.map